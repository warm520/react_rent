{"ast":null,"code":"import axios from 'axios';\nimport { getToken, removeToken } from './auth';\nexport const axiosAPI = axios.create({\n  baseURL: 'http://localhost:8080'\n});\n\n// 请求拦截器\naxiosAPI.interceptors.request.use(config => {\n  const {\n    url\n  } = config;\n  if (url.startsWith('/user') && !url.startsWith('/user/login') && !url.startsWith('/user/registered')) {\n    config.headers.Authorization = getToken();\n  }\n  return config;\n});\n\n// 响应拦截器\naxiosAPI.interceptors.response.use(response => {\n  const {\n    status\n  } = response.data;\n  if (status === 400) {\n    removeToken();\n  }\n  return response;\n});","map":{"version":3,"names":["axios","getToken","removeToken","axiosAPI","create","baseURL","interceptors","request","use","config","url","startsWith","headers","Authorization","response","status","data"],"sources":["E:/Github/react_rent/react_rent/src/utils/axios.js"],"sourcesContent":["import axios from 'axios';\r\nimport { getToken, removeToken } from './auth';\r\n\r\nexport const axiosAPI = axios.create({\r\n    baseURL: 'http://localhost:8080'\r\n});\r\n\r\n// 请求拦截器\r\naxiosAPI.interceptors.request.use((config) => {\r\n    const { url } = config;\r\n\r\n    if (\r\n        url.startsWith('/user')\r\n        && !url.startsWith('/user/login')\r\n        && !url.startsWith('/user/registered')\r\n    ) {\r\n        config.headers.Authorization = getToken();\r\n    }\r\n\r\n    return config;\r\n});\r\n\r\n// 响应拦截器\r\naxiosAPI.interceptors.response.use((response) => {\r\n    const { status } = response.data;\r\n\r\n    if (status === 400) {\r\n        removeToken();\r\n    }\r\n\r\n    return response;\r\n});"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,EAAEC,WAAW,QAAQ,QAAQ;AAE9C,OAAO,MAAMC,QAAQ,GAAGH,KAAK,CAACI,MAAM,CAAC;EACjCC,OAAO,EAAE;AACb,CAAC,CAAC;;AAEF;AACAF,QAAQ,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;EAC1C,MAAM;IAAEC;EAAI,CAAC,GAAGD,MAAM;EAEtB,IACIC,GAAG,CAACC,UAAU,CAAC,OAAO,CAAC,IACpB,CAACD,GAAG,CAACC,UAAU,CAAC,aAAa,CAAC,IAC9B,CAACD,GAAG,CAACC,UAAU,CAAC,kBAAkB,CAAC,EACxC;IACEF,MAAM,CAACG,OAAO,CAACC,aAAa,GAAGZ,QAAQ,EAAE;EAC7C;EAEA,OAAOQ,MAAM;AACjB,CAAC,CAAC;;AAEF;AACAN,QAAQ,CAACG,YAAY,CAACQ,QAAQ,CAACN,GAAG,CAAEM,QAAQ,IAAK;EAC7C,MAAM;IAAEC;EAAO,CAAC,GAAGD,QAAQ,CAACE,IAAI;EAEhC,IAAID,MAAM,KAAK,GAAG,EAAE;IAChBb,WAAW,EAAE;EACjB;EAEA,OAAOY,QAAQ;AACnB,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}