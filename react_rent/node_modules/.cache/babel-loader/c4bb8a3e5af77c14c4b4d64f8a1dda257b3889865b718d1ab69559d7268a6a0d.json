{"ast":null,"code":"// cookieStorage is useful Safari private browser mode, where localStorage\n// doesn't work but cookies do. This implementation is adopted from\n// https://developer.mozilla.org/en-US/docs/Web/API/Storage/LocalStorage\n\nvar util = require('../src/util');\nvar Global = util.Global;\nvar trim = util.trim;\nmodule.exports = {\n  name: 'cookieStorage',\n  read: read,\n  write: write,\n  each: each,\n  remove: remove,\n  clearAll: clearAll\n};\nvar doc = Global.document;\nfunction read(key) {\n  if (!key || !_has(key)) {\n    return null;\n  }\n  var regexpStr = \"(?:^|.*;\\\\s*)\" + escape(key).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\\\\s*((?:[^;](?!;))*[^;]?).*\";\n  return unescape(doc.cookie.replace(new RegExp(regexpStr), \"$1\"));\n}\nfunction each(callback) {\n  var cookies = doc.cookie.split(/; ?/g);\n  for (var i = cookies.length - 1; i >= 0; i--) {\n    if (!trim(cookies[i])) {\n      continue;\n    }\n    var kvp = cookies[i].split('=');\n    var key = unescape(kvp[0]);\n    var val = unescape(kvp[1]);\n    callback(val, key);\n  }\n}\nfunction write(key, data) {\n  if (!key) {\n    return;\n  }\n  doc.cookie = escape(key) + \"=\" + escape(data) + \"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/\";\n}\nfunction remove(key) {\n  if (!key || !_has(key)) {\n    return;\n  }\n  doc.cookie = escape(key) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/\";\n}\nfunction clearAll() {\n  each(function (_, key) {\n    remove(key);\n  });\n}\nfunction _has(key) {\n  return new RegExp(\"(?:^|;\\\\s*)\" + escape(key).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\").test(doc.cookie);\n}","map":{"version":3,"names":["util","require","Global","trim","module","exports","name","read","write","each","remove","clearAll","doc","document","key","_has","regexpStr","escape","replace","unescape","cookie","RegExp","callback","cookies","split","i","length","kvp","val","data","_","test"],"sources":["E:/Github/react_rent/react_rent/node_modules/store/storages/cookieStorage.js"],"sourcesContent":["// cookieStorage is useful Safari private browser mode, where localStorage\n// doesn't work but cookies do. This implementation is adopted from\n// https://developer.mozilla.org/en-US/docs/Web/API/Storage/LocalStorage\n\nvar util = require('../src/util')\nvar Global = util.Global\nvar trim = util.trim\n\nmodule.exports = {\n\tname: 'cookieStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar doc = Global.document\n\nfunction read(key) {\n\tif (!key || !_has(key)) { return null }\n\tvar regexpStr = \"(?:^|.*;\\\\s*)\" +\n\t\tescape(key).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") +\n\t\t\"\\\\s*\\\\=\\\\s*((?:[^;](?!;))*[^;]?).*\"\n\treturn unescape(doc.cookie.replace(new RegExp(regexpStr), \"$1\"))\n}\n\nfunction each(callback) {\n\tvar cookies = doc.cookie.split(/; ?/g)\n\tfor (var i = cookies.length - 1; i >= 0; i--) {\n\t\tif (!trim(cookies[i])) {\n\t\t\tcontinue\n\t\t}\n\t\tvar kvp = cookies[i].split('=')\n\t\tvar key = unescape(kvp[0])\n\t\tvar val = unescape(kvp[1])\n\t\tcallback(val, key)\n\t}\n}\n\nfunction write(key, data) {\n\tif(!key) { return }\n\tdoc.cookie = escape(key) + \"=\" + escape(data) + \"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/\"\n}\n\nfunction remove(key) {\n\tif (!key || !_has(key)) {\n\t\treturn\n\t}\n\tdoc.cookie = escape(key) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/\"\n}\n\nfunction clearAll() {\n\teach(function(_, key) {\n\t\tremove(key)\n\t})\n}\n\nfunction _has(key) {\n\treturn (new RegExp(\"(?:^|;\\\\s*)\" + escape(key).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\")).test(doc.cookie)\n}\n"],"mappings":"AAAA;AACA;AACA;;AAEA,IAAIA,IAAI,GAAGC,OAAO,CAAC,aAAa,CAAC;AACjC,IAAIC,MAAM,GAAGF,IAAI,CAACE,MAAM;AACxB,IAAIC,IAAI,GAAGH,IAAI,CAACG,IAAI;AAEpBC,MAAM,CAACC,OAAO,GAAG;EAChBC,IAAI,EAAE,eAAe;EACrBC,IAAI,EAAEA,IAAI;EACVC,KAAK,EAAEA,KAAK;EACZC,IAAI,EAAEA,IAAI;EACVC,MAAM,EAAEA,MAAM;EACdC,QAAQ,EAAEA;AACX,CAAC;AAED,IAAIC,GAAG,GAAGV,MAAM,CAACW,QAAQ;AAEzB,SAASN,IAAI,CAACO,GAAG,EAAE;EAClB,IAAI,CAACA,GAAG,IAAI,CAACC,IAAI,CAACD,GAAG,CAAC,EAAE;IAAE,OAAO,IAAI;EAAC;EACtC,IAAIE,SAAS,GAAG,eAAe,GAC9BC,MAAM,CAACH,GAAG,CAAC,CAACI,OAAO,CAAC,aAAa,EAAE,MAAM,CAAC,GAC1C,oCAAoC;EACrC,OAAOC,QAAQ,CAACP,GAAG,CAACQ,MAAM,CAACF,OAAO,CAAC,IAAIG,MAAM,CAACL,SAAS,CAAC,EAAE,IAAI,CAAC,CAAC;AACjE;AAEA,SAASP,IAAI,CAACa,QAAQ,EAAE;EACvB,IAAIC,OAAO,GAAGX,GAAG,CAACQ,MAAM,CAACI,KAAK,CAAC,MAAM,CAAC;EACtC,KAAK,IAAIC,CAAC,GAAGF,OAAO,CAACG,MAAM,GAAG,CAAC,EAAED,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;IAC7C,IAAI,CAACtB,IAAI,CAACoB,OAAO,CAACE,CAAC,CAAC,CAAC,EAAE;MACtB;IACD;IACA,IAAIE,GAAG,GAAGJ,OAAO,CAACE,CAAC,CAAC,CAACD,KAAK,CAAC,GAAG,CAAC;IAC/B,IAAIV,GAAG,GAAGK,QAAQ,CAACQ,GAAG,CAAC,CAAC,CAAC,CAAC;IAC1B,IAAIC,GAAG,GAAGT,QAAQ,CAACQ,GAAG,CAAC,CAAC,CAAC,CAAC;IAC1BL,QAAQ,CAACM,GAAG,EAAEd,GAAG,CAAC;EACnB;AACD;AAEA,SAASN,KAAK,CAACM,GAAG,EAAEe,IAAI,EAAE;EACzB,IAAG,CAACf,GAAG,EAAE;IAAE;EAAO;EAClBF,GAAG,CAACQ,MAAM,GAAGH,MAAM,CAACH,GAAG,CAAC,GAAG,GAAG,GAAGG,MAAM,CAACY,IAAI,CAAC,GAAG,iDAAiD;AAClG;AAEA,SAASnB,MAAM,CAACI,GAAG,EAAE;EACpB,IAAI,CAACA,GAAG,IAAI,CAACC,IAAI,CAACD,GAAG,CAAC,EAAE;IACvB;EACD;EACAF,GAAG,CAACQ,MAAM,GAAGH,MAAM,CAACH,GAAG,CAAC,GAAG,kDAAkD;AAC9E;AAEA,SAASH,QAAQ,GAAG;EACnBF,IAAI,CAAC,UAASqB,CAAC,EAAEhB,GAAG,EAAE;IACrBJ,MAAM,CAACI,GAAG,CAAC;EACZ,CAAC,CAAC;AACH;AAEA,SAASC,IAAI,CAACD,GAAG,EAAE;EAClB,OAAQ,IAAIO,MAAM,CAAC,aAAa,GAAGJ,MAAM,CAACH,GAAG,CAAC,CAACI,OAAO,CAAC,aAAa,EAAE,MAAM,CAAC,GAAG,SAAS,CAAC,CAAEa,IAAI,CAACnB,GAAG,CAACQ,MAAM,CAAC;AAC7G"},"metadata":{},"sourceType":"script","externalDependencies":[]}