{"ast":null,"code":"// oldIE-userDataStorage provides storage for Internet Explorer\n// versions 6 and 7, where no localStorage, sessionStorage, etc\n// is available.\n\nvar util = require('../src/util');\nvar Global = util.Global;\nmodule.exports = {\n  name: 'oldIE-userDataStorage',\n  write: write,\n  read: read,\n  each: each,\n  remove: remove,\n  clearAll: clearAll\n};\nvar storageName = 'storejs';\nvar doc = Global.document;\nvar _withStorageEl = _makeIEStorageElFunction();\nvar disable = (Global.navigator ? Global.navigator.userAgent : '').match(/ (MSIE 8|MSIE 9|MSIE 10)\\./); // MSIE 9.x, MSIE 10.x\n\nfunction write(unfixedKey, data) {\n  if (disable) {\n    return;\n  }\n  var fixedKey = fixKey(unfixedKey);\n  _withStorageEl(function (storageEl) {\n    storageEl.setAttribute(fixedKey, data);\n    storageEl.save(storageName);\n  });\n}\nfunction read(unfixedKey) {\n  if (disable) {\n    return;\n  }\n  var fixedKey = fixKey(unfixedKey);\n  var res = null;\n  _withStorageEl(function (storageEl) {\n    res = storageEl.getAttribute(fixedKey);\n  });\n  return res;\n}\nfunction each(callback) {\n  _withStorageEl(function (storageEl) {\n    var attributes = storageEl.XMLDocument.documentElement.attributes;\n    for (var i = attributes.length - 1; i >= 0; i--) {\n      var attr = attributes[i];\n      callback(storageEl.getAttribute(attr.name), attr.name);\n    }\n  });\n}\nfunction remove(unfixedKey) {\n  var fixedKey = fixKey(unfixedKey);\n  _withStorageEl(function (storageEl) {\n    storageEl.removeAttribute(fixedKey);\n    storageEl.save(storageName);\n  });\n}\nfunction clearAll() {\n  _withStorageEl(function (storageEl) {\n    var attributes = storageEl.XMLDocument.documentElement.attributes;\n    storageEl.load(storageName);\n    for (var i = attributes.length - 1; i >= 0; i--) {\n      storageEl.removeAttribute(attributes[i].name);\n    }\n    storageEl.save(storageName);\n  });\n}\n\n// Helpers\n//////////\n\n// In IE7, keys cannot start with a digit or contain certain chars.\n// See https://github.com/marcuswestin/store.js/issues/40\n// See https://github.com/marcuswestin/store.js/issues/83\nvar forbiddenCharsRegex = new RegExp(\"[!\\\"#$%&'()*+,/\\\\\\\\:;<=>?@[\\\\]^`{|}~]\", \"g\");\nfunction fixKey(key) {\n  return key.replace(/^\\d/, '___$&').replace(forbiddenCharsRegex, '___');\n}\nfunction _makeIEStorageElFunction() {\n  if (!doc || !doc.documentElement || !doc.documentElement.addBehavior) {\n    return null;\n  }\n  var scriptTag = 'script',\n    storageOwner,\n    storageContainer,\n    storageEl;\n\n  // Since #userData storage applies only to specific paths, we need to\n  // somehow link our data to a specific path.  We choose /favicon.ico\n  // as a pretty safe option, since all browsers already make a request to\n  // this URL anyway and being a 404 will not hurt us here.  We wrap an\n  // iframe pointing to the favicon in an ActiveXObject(htmlfile) object\n  // (see: http://msdn.microsoft.com/en-us/library/aa752574(v=VS.85).aspx)\n  // since the iframe access rules appear to allow direct access and\n  // manipulation of the document element, even for a 404 page.  This\n  // document can be used instead of the current document (which would\n  // have been limited to the current path) to perform #userData storage.\n  try {\n    /* global ActiveXObject */\n    storageContainer = new ActiveXObject('htmlfile');\n    storageContainer.open();\n    storageContainer.write('<' + scriptTag + '>document.w=window</' + scriptTag + '><iframe src=\"/favicon.ico\"></iframe>');\n    storageContainer.close();\n    storageOwner = storageContainer.w.frames[0].document;\n    storageEl = storageOwner.createElement('div');\n  } catch (e) {\n    // somehow ActiveXObject instantiation failed (perhaps some special\n    // security settings or otherwse), fall back to per-path storage\n    storageEl = doc.createElement('div');\n    storageOwner = doc.body;\n  }\n  return function (storeFunction) {\n    var args = [].slice.call(arguments, 0);\n    args.unshift(storageEl);\n    // See http://msdn.microsoft.com/en-us/library/ms531081(v=VS.85).aspx\n    // and http://msdn.microsoft.com/en-us/library/ms531424(v=VS.85).aspx\n    storageOwner.appendChild(storageEl);\n    storageEl.addBehavior('#default#userData');\n    storageEl.load(storageName);\n    storeFunction.apply(this, args);\n    storageOwner.removeChild(storageEl);\n    return;\n  };\n}","map":{"version":3,"names":["util","require","Global","module","exports","name","write","read","each","remove","clearAll","storageName","doc","document","_withStorageEl","_makeIEStorageElFunction","disable","navigator","userAgent","match","unfixedKey","data","fixedKey","fixKey","storageEl","setAttribute","save","res","getAttribute","callback","attributes","XMLDocument","documentElement","i","length","attr","removeAttribute","load","forbiddenCharsRegex","RegExp","key","replace","addBehavior","scriptTag","storageOwner","storageContainer","ActiveXObject","open","close","w","frames","createElement","e","body","storeFunction","args","slice","call","arguments","unshift","appendChild","apply","removeChild"],"sources":["E:/Github/react_rent/react_rent/node_modules/store/storages/oldIE-userDataStorage.js"],"sourcesContent":["// oldIE-userDataStorage provides storage for Internet Explorer\n// versions 6 and 7, where no localStorage, sessionStorage, etc\n// is available.\n\nvar util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'oldIE-userDataStorage',\n\twrite: write,\n\tread: read,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar storageName = 'storejs'\nvar doc = Global.document\nvar _withStorageEl = _makeIEStorageElFunction()\nvar disable = (Global.navigator ? Global.navigator.userAgent : '').match(/ (MSIE 8|MSIE 9|MSIE 10)\\./) // MSIE 9.x, MSIE 10.x\n\nfunction write(unfixedKey, data) {\n\tif (disable) { return }\n\tvar fixedKey = fixKey(unfixedKey)\n\t_withStorageEl(function(storageEl) {\n\t\tstorageEl.setAttribute(fixedKey, data)\n\t\tstorageEl.save(storageName)\n\t})\n}\n\nfunction read(unfixedKey) {\n\tif (disable) { return }\n\tvar fixedKey = fixKey(unfixedKey)\n\tvar res = null\n\t_withStorageEl(function(storageEl) {\n\t\tres = storageEl.getAttribute(fixedKey)\n\t})\n\treturn res\n}\n\nfunction each(callback) {\n\t_withStorageEl(function(storageEl) {\n\t\tvar attributes = storageEl.XMLDocument.documentElement.attributes\n\t\tfor (var i=attributes.length-1; i>=0; i--) {\n\t\t\tvar attr = attributes[i]\n\t\t\tcallback(storageEl.getAttribute(attr.name), attr.name)\n\t\t}\n\t})\n}\n\nfunction remove(unfixedKey) {\n\tvar fixedKey = fixKey(unfixedKey)\n\t_withStorageEl(function(storageEl) {\n\t\tstorageEl.removeAttribute(fixedKey)\n\t\tstorageEl.save(storageName)\n\t})\n}\n\nfunction clearAll() {\n\t_withStorageEl(function(storageEl) {\n\t\tvar attributes = storageEl.XMLDocument.documentElement.attributes\n\t\tstorageEl.load(storageName)\n\t\tfor (var i=attributes.length-1; i>=0; i--) {\n\t\t\tstorageEl.removeAttribute(attributes[i].name)\n\t\t}\n\t\tstorageEl.save(storageName)\n\t})\n}\n\n// Helpers\n//////////\n\n// In IE7, keys cannot start with a digit or contain certain chars.\n// See https://github.com/marcuswestin/store.js/issues/40\n// See https://github.com/marcuswestin/store.js/issues/83\nvar forbiddenCharsRegex = new RegExp(\"[!\\\"#$%&'()*+,/\\\\\\\\:;<=>?@[\\\\]^`{|}~]\", \"g\")\nfunction fixKey(key) {\n\treturn key.replace(/^\\d/, '___$&').replace(forbiddenCharsRegex, '___')\n}\n\nfunction _makeIEStorageElFunction() {\n\tif (!doc || !doc.documentElement || !doc.documentElement.addBehavior) {\n\t\treturn null\n\t}\n\tvar scriptTag = 'script',\n\t\tstorageOwner,\n\t\tstorageContainer,\n\t\tstorageEl\n\n\t// Since #userData storage applies only to specific paths, we need to\n\t// somehow link our data to a specific path.  We choose /favicon.ico\n\t// as a pretty safe option, since all browsers already make a request to\n\t// this URL anyway and being a 404 will not hurt us here.  We wrap an\n\t// iframe pointing to the favicon in an ActiveXObject(htmlfile) object\n\t// (see: http://msdn.microsoft.com/en-us/library/aa752574(v=VS.85).aspx)\n\t// since the iframe access rules appear to allow direct access and\n\t// manipulation of the document element, even for a 404 page.  This\n\t// document can be used instead of the current document (which would\n\t// have been limited to the current path) to perform #userData storage.\n\ttry {\n\t\t/* global ActiveXObject */\n\t\tstorageContainer = new ActiveXObject('htmlfile')\n\t\tstorageContainer.open()\n\t\tstorageContainer.write('<'+scriptTag+'>document.w=window</'+scriptTag+'><iframe src=\"/favicon.ico\"></iframe>')\n\t\tstorageContainer.close()\n\t\tstorageOwner = storageContainer.w.frames[0].document\n\t\tstorageEl = storageOwner.createElement('div')\n\t} catch(e) {\n\t\t// somehow ActiveXObject instantiation failed (perhaps some special\n\t\t// security settings or otherwse), fall back to per-path storage\n\t\tstorageEl = doc.createElement('div')\n\t\tstorageOwner = doc.body\n\t}\n\n\treturn function(storeFunction) {\n\t\tvar args = [].slice.call(arguments, 0)\n\t\targs.unshift(storageEl)\n\t\t// See http://msdn.microsoft.com/en-us/library/ms531081(v=VS.85).aspx\n\t\t// and http://msdn.microsoft.com/en-us/library/ms531424(v=VS.85).aspx\n\t\tstorageOwner.appendChild(storageEl)\n\t\tstorageEl.addBehavior('#default#userData')\n\t\tstorageEl.load(storageName)\n\t\tstoreFunction.apply(this, args)\n\t\tstorageOwner.removeChild(storageEl)\n\t\treturn\n\t}\n}\n"],"mappings":"AAAA;AACA;AACA;;AAEA,IAAIA,IAAI,GAAGC,OAAO,CAAC,aAAa,CAAC;AACjC,IAAIC,MAAM,GAAGF,IAAI,CAACE,MAAM;AAExBC,MAAM,CAACC,OAAO,GAAG;EAChBC,IAAI,EAAE,uBAAuB;EAC7BC,KAAK,EAAEA,KAAK;EACZC,IAAI,EAAEA,IAAI;EACVC,IAAI,EAAEA,IAAI;EACVC,MAAM,EAAEA,MAAM;EACdC,QAAQ,EAAEA;AACX,CAAC;AAED,IAAIC,WAAW,GAAG,SAAS;AAC3B,IAAIC,GAAG,GAAGV,MAAM,CAACW,QAAQ;AACzB,IAAIC,cAAc,GAAGC,wBAAwB,EAAE;AAC/C,IAAIC,OAAO,GAAG,CAACd,MAAM,CAACe,SAAS,GAAGf,MAAM,CAACe,SAAS,CAACC,SAAS,GAAG,EAAE,EAAEC,KAAK,CAAC,4BAA4B,CAAC,EAAC;;AAEvG,SAASb,KAAK,CAACc,UAAU,EAAEC,IAAI,EAAE;EAChC,IAAIL,OAAO,EAAE;IAAE;EAAO;EACtB,IAAIM,QAAQ,GAAGC,MAAM,CAACH,UAAU,CAAC;EACjCN,cAAc,CAAC,UAASU,SAAS,EAAE;IAClCA,SAAS,CAACC,YAAY,CAACH,QAAQ,EAAED,IAAI,CAAC;IACtCG,SAAS,CAACE,IAAI,CAACf,WAAW,CAAC;EAC5B,CAAC,CAAC;AACH;AAEA,SAASJ,IAAI,CAACa,UAAU,EAAE;EACzB,IAAIJ,OAAO,EAAE;IAAE;EAAO;EACtB,IAAIM,QAAQ,GAAGC,MAAM,CAACH,UAAU,CAAC;EACjC,IAAIO,GAAG,GAAG,IAAI;EACdb,cAAc,CAAC,UAASU,SAAS,EAAE;IAClCG,GAAG,GAAGH,SAAS,CAACI,YAAY,CAACN,QAAQ,CAAC;EACvC,CAAC,CAAC;EACF,OAAOK,GAAG;AACX;AAEA,SAASnB,IAAI,CAACqB,QAAQ,EAAE;EACvBf,cAAc,CAAC,UAASU,SAAS,EAAE;IAClC,IAAIM,UAAU,GAAGN,SAAS,CAACO,WAAW,CAACC,eAAe,CAACF,UAAU;IACjE,KAAK,IAAIG,CAAC,GAACH,UAAU,CAACI,MAAM,GAAC,CAAC,EAAED,CAAC,IAAE,CAAC,EAAEA,CAAC,EAAE,EAAE;MAC1C,IAAIE,IAAI,GAAGL,UAAU,CAACG,CAAC,CAAC;MACxBJ,QAAQ,CAACL,SAAS,CAACI,YAAY,CAACO,IAAI,CAAC9B,IAAI,CAAC,EAAE8B,IAAI,CAAC9B,IAAI,CAAC;IACvD;EACD,CAAC,CAAC;AACH;AAEA,SAASI,MAAM,CAACW,UAAU,EAAE;EAC3B,IAAIE,QAAQ,GAAGC,MAAM,CAACH,UAAU,CAAC;EACjCN,cAAc,CAAC,UAASU,SAAS,EAAE;IAClCA,SAAS,CAACY,eAAe,CAACd,QAAQ,CAAC;IACnCE,SAAS,CAACE,IAAI,CAACf,WAAW,CAAC;EAC5B,CAAC,CAAC;AACH;AAEA,SAASD,QAAQ,GAAG;EACnBI,cAAc,CAAC,UAASU,SAAS,EAAE;IAClC,IAAIM,UAAU,GAAGN,SAAS,CAACO,WAAW,CAACC,eAAe,CAACF,UAAU;IACjEN,SAAS,CAACa,IAAI,CAAC1B,WAAW,CAAC;IAC3B,KAAK,IAAIsB,CAAC,GAACH,UAAU,CAACI,MAAM,GAAC,CAAC,EAAED,CAAC,IAAE,CAAC,EAAEA,CAAC,EAAE,EAAE;MAC1CT,SAAS,CAACY,eAAe,CAACN,UAAU,CAACG,CAAC,CAAC,CAAC5B,IAAI,CAAC;IAC9C;IACAmB,SAAS,CAACE,IAAI,CAACf,WAAW,CAAC;EAC5B,CAAC,CAAC;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAI2B,mBAAmB,GAAG,IAAIC,MAAM,CAAC,uCAAuC,EAAE,GAAG,CAAC;AAClF,SAAShB,MAAM,CAACiB,GAAG,EAAE;EACpB,OAAOA,GAAG,CAACC,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,CAACA,OAAO,CAACH,mBAAmB,EAAE,KAAK,CAAC;AACvE;AAEA,SAASvB,wBAAwB,GAAG;EACnC,IAAI,CAACH,GAAG,IAAI,CAACA,GAAG,CAACoB,eAAe,IAAI,CAACpB,GAAG,CAACoB,eAAe,CAACU,WAAW,EAAE;IACrE,OAAO,IAAI;EACZ;EACA,IAAIC,SAAS,GAAG,QAAQ;IACvBC,YAAY;IACZC,gBAAgB;IAChBrB,SAAS;;EAEV;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,IAAI;IACH;IACAqB,gBAAgB,GAAG,IAAIC,aAAa,CAAC,UAAU,CAAC;IAChDD,gBAAgB,CAACE,IAAI,EAAE;IACvBF,gBAAgB,CAACvC,KAAK,CAAC,GAAG,GAACqC,SAAS,GAAC,sBAAsB,GAACA,SAAS,GAAC,uCAAuC,CAAC;IAC9GE,gBAAgB,CAACG,KAAK,EAAE;IACxBJ,YAAY,GAAGC,gBAAgB,CAACI,CAAC,CAACC,MAAM,CAAC,CAAC,CAAC,CAACrC,QAAQ;IACpDW,SAAS,GAAGoB,YAAY,CAACO,aAAa,CAAC,KAAK,CAAC;EAC9C,CAAC,CAAC,OAAMC,CAAC,EAAE;IACV;IACA;IACA5B,SAAS,GAAGZ,GAAG,CAACuC,aAAa,CAAC,KAAK,CAAC;IACpCP,YAAY,GAAGhC,GAAG,CAACyC,IAAI;EACxB;EAEA,OAAO,UAASC,aAAa,EAAE;IAC9B,IAAIC,IAAI,GAAG,EAAE,CAACC,KAAK,CAACC,IAAI,CAACC,SAAS,EAAE,CAAC,CAAC;IACtCH,IAAI,CAACI,OAAO,CAACnC,SAAS,CAAC;IACvB;IACA;IACAoB,YAAY,CAACgB,WAAW,CAACpC,SAAS,CAAC;IACnCA,SAAS,CAACkB,WAAW,CAAC,mBAAmB,CAAC;IAC1ClB,SAAS,CAACa,IAAI,CAAC1B,WAAW,CAAC;IAC3B2C,aAAa,CAACO,KAAK,CAAC,IAAI,EAAEN,IAAI,CAAC;IAC/BX,YAAY,CAACkB,WAAW,CAACtC,SAAS,CAAC;IACnC;EACD,CAAC;AACF"},"metadata":{},"sourceType":"script","externalDependencies":[]}