"use strict";

var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", {
  value: true
});
var domTarget_1 = require("../utils/domTarget");
var useDeepCompareWithTarget_1 = __importDefault(require("../utils/useDeepCompareWithTarget"));
var useLatest_1 = __importDefault(require("../useLatest"));
var useMutationObserver = function useMutationObserver(callback, target, options) {
  if (options === void 0) {
    options = {};
  }
  var callbackRef = (0, useLatest_1["default"])(callback);
  (0, useDeepCompareWithTarget_1["default"])(function () {
    var element = (0, domTarget_1.getTargetElement)(target);
    if (!element) {
      return;
    }
    var observer = new MutationObserver(callbackRef.current);
    observer.observe(element, options);
    return function () {
      if (observer) {
        observer.disconnect();
      }
    };
  }, [options], target);
};
exports["default"] = useMutationObserver;